import {
  Alert,
  ApWidgetApiResponse,
  ArWidgetApiResponse,
  BoardOverviewResponse,
  CashOutlookResponse,
  HeadlinesResponse,
  HealthStatus,
  Period,
  SectionConfig,
} from '../core/models/dashboard.models';

export const mockPeriods: Period[] = [
  { id: 'current-month', label: 'Current Month', type: 'month' },
  { id: 'current-quarter', label: 'This Quarter', type: 'quarter' },
  { id: 'current-year', label: 'This Year', type: 'year' },
];

export const mockSections: SectionConfig[] = [
  {
    id: 'liquidity',
    name: 'Liquidity',
    icon: 'Droplets',
    status: 'healthy',
    kpis: [
      { label: 'Cash Position', value: '$24.3M', change: 8.2, trend: 'up' },
      { label: 'Quick Ratio', value: '2.4x', change: 0.3, trend: 'up' },
    ],
    sparklineData: [20, 21, 19, 22, 23, 22, 24],
  },
  {
    id: 'ar',
    name: 'Accounts Receivable',
    icon: 'ArrowDownToLine',
    status: 'warning',
    kpis: [
      { label: 'DSO', value: '--', status: 'warning' },
      { label: 'Open AR', value: '--' },
    ],
    sparklineData: [7.8, 8.0, 7.9, 8.1, 8.3, 8.2, 8.2],
    source: 'api_ar',
  },
  {
    id: 'ap',
    name: 'Accounts Payable',
    icon: 'ArrowUpToLine',
    status: 'healthy',
    kpis: [
      { label: 'DPO', value: '--' },
      { label: 'Open AP', value: '--' },
    ],
    sparklineData: [5.2, 5.0, 4.9, 4.8, 4.7, 4.6, 4.6],
    source: 'api_ap',
  },
  {
    id: 'profitability',
    name: 'Profitability',
    icon: 'TrendingUp',
    status: 'healthy',
    kpis: [
      { label: 'Gross Margin', value: '68%', change: 2.1, trend: 'up' },
      { label: 'EBITDA', value: '$5.2M', change: 12.3, trend: 'up' },
    ],
    sparklineData: [4.5, 4.7, 4.9, 5.0, 5.1, 5.3, 5.2],
  },
  {
    id: 'working-capital',
    name: 'Working Capital',
    icon: 'Repeat',
    status: 'healthy',
    kpis: [
      { label: 'WC Days', value: '28 days', change: -3, trend: 'down' },
      { label: 'WC Amount', value: '$6.8M', change: 4.2, trend: 'up' },
    ],
    sparklineData: [6.2, 6.4, 6.5, 6.6, 6.7, 6.9, 6.8],
  },
  {
    id: 'revenue-health',
    name: 'Revenue Health',
    icon: 'DollarSign',
    status: 'healthy',
    kpis: [
      { label: 'MRR', value: '$3.2M', change: 6.8, trend: 'up' }
    ],
    sparklineData: [2.8, 2.9, 3.0, 3.1, 3.1, 3.2, 3.2],
  },
  {
    id: 'fx-treasury',
    name: 'FX & Treasury',
    icon: 'Coins',
    status: 'warning',
    kpis: [
      {
        label: 'FX Exposure',
        value: '$12.4M',
        change: 8.5,
        trend: 'up',
        status: 'warning',
      },
      { label: 'Hedged %', value: '62%', change: -3, trend: 'down' },
    ],
    sparklineData: [10, 11, 11.5, 12, 12.2, 12.5, 12.4],
  },
  {
    id: 'tax-vat',
    name: 'Tax/VAT',
    icon: 'FileText',
    status: 'healthy',
    kpis: [
      { label: 'ETR', value: '24.5%', change: 0.2, trend: 'up' },
      { label: 'VAT Payable', value: '$420K', change: -2.1, trend: 'down' },
    ],
    sparklineData: [450, 440, 435, 430, 425, 422, 420],
  },
  {
    id: 'balance-sheet',
    name: 'Balance Sheet & Covenants',
    icon: 'Scale',
    status: 'healthy',
    kpis: [
      { label: 'Debt/EBITDA', value: '2.1x', change: -0.2, trend: 'down' },
      { label: 'Interest Coverage', value: '8.4x', change: 0.6, trend: 'up' },
    ],
    sparklineData: [7.5, 7.8, 8.0, 8.1, 8.3, 8.5, 8.4],
  },
  {
    id: 'concentration-risk',
    name: 'Concentration Risk',
    icon: 'Target',
    status: 'critical',
    kpis: [
      {
        label: 'Top 5 Customers',
        value: '58%',
        change: 4.2,
        trend: 'up',
        status: 'critical',
      },
      {
        label: 'Top Supplier',
        value: '32%',
        change: 2.1,
        trend: 'up',
        status: 'warning',
      },
    ],
    sparklineData: [40, 41, 43, 47, 52, 55, 58],
  },
];

export const mockHeadlines = [
  { label: 'Biggest MoM Change', value: 'EBITDA +12.3%', trend: 'up' as const },
  { label: 'Biggest YoY Change', value: 'Revenue +18.5%', trend: 'up' as const },
];

export const mockAlerts: Alert[] = [
  {
    id: '1',
    severity: 'high',
    title: 'Concentration Risk Threshold Exceeded',
    description:
      'Top 5 customers now represent 58% of revenue, exceeding policy limit of 55%',
    section: 'concentration-risk',
    timestamp: new Date(Date.now() - 1000 * 60 * 30),
    isRead: false,
  },
  {
    id: '2',
    severity: 'high',
    title: 'DSO Increased Above Target',
    description: 'DSO has risen to 42 days, 7 days above the 35-day target',
    section: 'ar',
    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2),
    isRead: false,
  },
  {
    id: '3',
    severity: 'high',
    title: 'FX Exposure Hedge Ratio Below Target',
    description: 'Hedged percentage dropped to 62%, below the 70% policy threshold',
    section: 'fx-treasury',
    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 4),
    isRead: false,
  },
  {
    id: '4',
    severity: 'medium',
    title: 'Large Payment Due Next Week',
    description: 'Supplier payment of $2.4M due Nov 14, ensure sufficient liquidity',
    section: 'ap',
    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 6),
    isRead: true,
  },
  {
    id: '5',
    severity: 'medium',
    title: 'Overdue Invoices Increased',
    description: '15 invoices totaling $680K are now >60 days overdue',
    section: 'ar',
    timestamp: new Date(Date.now() - 1000 * 60 * 60 * 12),
    isRead: true,
  }
];

export const mockArWidgetResponse: ArWidgetApiResponse = {
  title: 'Accounts Receivable',
  source: 'api_ar',
  status: 'warning',
  status_reason: 'AR overdue ratio 0,77%',
  filters: {
    to: '2025-11-30',
    from: '2025-11-01',
    mode: 'month',
    compare: 'yoy',
    entity_id: null,
    report_ccy: 'EUR',
  },
  metrics: {
    dso: {
      better_is: 'down',
      delta_pct: null,
      value_days: 196.9013605442177,
    },
    open_ar: {
      value: 356850,
      currency: 'EUR',
      delta_pct: null,
    },
  },
};

export const mockApWidgetResponse: ApWidgetApiResponse = {
  title: 'Accounts Payable',
  source: 'api_ap',
  status: 'warning',
  status_reason: 'AP overdue ratio 70,29%',
  filters: {
    to: '2025-11-30',
    from: '2025-11-01',
    mode: 'month',
    compare: 'prev_period',
    entity_id: null,
    report_ccy: 'EUR',
  },
  metrics: {
    dpo: {
      better_is: 'up',
      delta_pct: 0.0546999787722487,
      value_days: 171.84152179390276,
    },
    open_ap: {
      value: 233575,
      currency: 'EUR',
      delta_pct: 0.158462492250465,
    },
  },
};

export const mockCashOutlookResponse: CashOutlookResponse = {
  as_of: '2025-11-11',
  title: '13-Week Outlook',
  currency: 'EUR',
  entity_id: 6,
  source: 'mock_cash_outlook',
  weeks: [
    {
      kind: 'actual',
      label: 'W1',
      value: 2300,
      week_end: '2025-11-16',
      week_start: '2025-11-10',
      week_index: 0,
      actual: 2300,
      projected: 2300,
    },
    {
      kind: 'actual',
      label: 'W2',
      value: 5400,
      week_end: '2025-11-23',
      week_start: '2025-11-17',
      week_index: 1,
      actual: 5400,
      projected: 5400,
    },
    {
      kind: 'projected',
      label: 'W3',
      value: 9350,
      week_end: '2025-11-30',
      week_start: '2025-11-24',
      week_index: 2,
      actual: null,
      projected: 9350,
    },
    {
      kind: 'projected',
      label: 'W4',
      value: 9350,
      week_end: '2025-12-07',
      week_start: '2025-12-01',
      week_index: 3,
      actual: null,
      projected: 9350,
    },
    {
      kind: 'projected',
      label: 'W5',
      value: 9350,
      week_end: '2025-12-14',
      week_start: '2025-12-08',
      week_index: 4,
      actual: null,
      projected: 9350,
    },
    {
      kind: 'projected',
      label: 'W6',
      value: 9350,
      week_end: '2025-12-21',
      week_start: '2025-12-15',
      week_index: 5,
      actual: null,
      projected: 9350,
    },
    {
      kind: 'projected',
      label: 'W7',
      value: 16475,
      week_end: '2025-12-28',
      week_start: '2025-12-22',
      week_index: 6,
      actual: null,
      projected: 16475,
    },
    {
      kind: 'projected',
      label: 'W8',
      value: 16475,
      week_end: '2026-01-04',
      week_start: '2025-12-29',
      week_index: 7,
      actual: null,
      projected: 16475,
    },
    {
      kind: 'projected',
      label: 'W9',
      value: 16475,
      week_end: '2026-01-11',
      week_start: '2026-01-05',
      week_index: 8,
      actual: null,
      projected: 16475,
    },
    {
      kind: 'projected',
      label: 'W10',
      value: 16475,
      week_end: '2026-01-18',
      week_start: '2026-01-12',
      week_index: 9,
      actual: null,
      projected: 16475,
    },
    {
      kind: 'projected',
      label: 'W11',
      value: 40175,
      week_end: '2026-01-25',
      week_start: '2026-01-19',
      week_index: 10,
      actual: null,
      projected: 40175,
    },
    {
      kind: 'projected',
      label: 'W12',
      value: 40175,
      week_end: '2026-02-01',
      week_start: '2026-01-26',
      week_index: 11,
      actual: null,
      projected: 40175,
    },
    {
      kind: 'projected',
      label: 'W13',
      value: 40175,
      week_end: '2026-02-08',
      week_start: '2026-02-02',
      week_index: 12,
      actual: null,
      projected: 40175,
    },
  ],
  summary: [
    {
      cash_asof: 2300,
      min_balance_13w: 2300,
      will_breach_zero: false,
    },
  ],
};

export const mockBoardOverviewResponse: BoardOverviewResponse = {
  filters: {
    as_of: '2025-11-13',
    entity_ids: [4, 7],
    report_ccy: 'EUR',
  },
  revenue: {
    status: 'Critical',
    yoy: {
      series: [
        { month: '2024-12-01', yoy_pct: null },
        { month: '2025-01-01', yoy_pct: 2.9697688392536867 },
        { month: '2025-02-01', yoy_pct: 2.5255796805098252 },
        { month: '2025-03-01', yoy_pct: 1.8336464661650289 },
        { month: '2025-04-01', yoy_pct: 2.827964362871915 },
        { month: '2025-05-01', yoy_pct: 3.4934228651807483 },
        { month: '2025-06-01', yoy_pct: 2.2713873708978133 },
        { month: '2025-07-01', yoy_pct: 3.8031868606828987 },
        { month: '2025-08-01', yoy_pct: 2.2832368939254845 },
        { month: '2025-09-01', yoy_pct: 3.7689618556232263 },
        { month: '2025-10-01', yoy_pct: 2.7354265445842087 },
        { month: '2025-11-01', yoy_pct: 3.9991651644419362 },
      ],
      filters: {
        as_of: '2025-11-13',
        months: 12,
        entity_ids: [4, 7],
        report_ccy: 'EUR',
      },
    },
    run_rate: {
      qtd: 217279.36,
      ttm: 1223186.67,
      ytd: 1129033.95,
      filters: {
        as_of: '2025-11-13',
        entity_ids: [4, 7],
        report_ccy: 'EUR',
      },
      currency: 'EUR',
      latest_month: 111260.82,
      run_rate_annualized: 1303676.16,
    },
  },
  tax_vat: {
    latest: {
      net: null,
      input: null,
      month: null,
      output: null,
    },
    status: 'Critical',
    filters: {
      as_of: '2025-11-13',
      entity_ids: [4, 7],
      report_ccy: 'EUR',
    },
  },
  liquidity: {
    cash: 363187.77,
    quick_ratio: 2.8779684933475757,
    status: 'Healthy',
  },
  fx_treasury: {
    by_ccy: [{ ccy: 'EUR', net: 539328.17 }],
    filters: {
      as_of: '2025-11-13',
      entity_ids: [4, 7],
      report_ccy: 'EUR',
    },
    total_net: 539328.17,
    status: 'Critical',
  },
  concentration: {
    status: 'Healthy',
    customers: {
      top: [
        { amount: 284175.85, share_pct: 0.2555708638305333, customer_id: 45 },
        { amount: 178750, share_pct: 0.16075712242862238, customer_id: 27 },
        { amount: 172150, share_pct: 0.15482147483125786, customer_id: 28 },
        { amount: 165550, share_pct: 0.14888582723389334, customer_id: 17 },
        { amount: 158950, share_pct: 0.14295017963652882, customer_id: 18 },
      ],
      total: 1111925.85,
      others: {
        amount: 152350,
        share_pct: 0.1370145320391643,
      },
      filters: {
        as_of: '2025-11-13',
        top_n: 5,
        months: 12,
        entity_ids: [4, 7],
        report_ccy: 'EUR',
      },
      currency: 'EUR',
    },
    suppliers: {
      top: [
        { amount: 190363.99, share_pct: 0.23289989812249987, supplier_id: 53 },
        { amount: 136400, share_pct: 0.1668779168996667, supplier_id: 21 },
        { amount: 130900, share_pct: 0.16014896863758336, supplier_id: 19 },
        { amount: 125400, share_pct: 0.15342002037550003, supplier_id: 27 },
        { amount: 119900, share_pct: 0.1466910721134167, supplier_id: 18 },
      ],
      total: 817363.99,
      others: {
        amount: 114400,
        share_pct: 0.13996212385133336,
      },
      filters: {
        as_of: '2025-11-13',
        top_n: 5,
        months: 12,
        entity_ids: [4, 7],
        report_ccy: 'EUR',
      },
      currency: 'EUR',
    },
  },
  profitability: {
    status: 'Critical',
    ebitda_ttm: -65200.32,
    ebitda_margin: -0.05330365478884756,
    gross_margin_pct: 0.4372183683133172,
  },
  working_capital: {
    status: 'Critical',
    amount: 70731.63,
    ap_open: 231057.87,
    ar_open: 301789.5,
    rev_ttm: 1223186.67,
    ccc_days: null,
    cogs_ttm: -688386.99,
    dpo_days: null,
    dso_days: 90.05425762201938,
  },
  balance_sheet_covenants: {
    status: 'Critical',
    net_debt: -444687.77,
    debt_to_ebitda: null,
    interest_coverage: null,
  },
};

export const mockHeadlinesResponse: HeadlinesResponse = {
  filters: {
    asof_month: '2025-11-01',
    entity_ids: [4, 7],
    report_ccy: 'EUR',
  },
  signals: {
    open_ap: 231057.87,
    open_ar: 301789.5,
    currency: 'EUR',
    dpo_days: 122.51266188223575,
    dso_days: 90.05425762201938,
    dpo_delta: -0.02575954963676781,
    dso_delta: 0.0029669521555094,
    rev_yoy_pct: null,
    interest_coverage: null,
    low_cash_next_13w: null,
    net_debt_to_ebitda: null,
  },
  headlines: [
    {
      code: 'dso_up',
      level: 'info',
      message: 'DSO increased by ,30% to 90,05 days.',
    },
  ],
};
