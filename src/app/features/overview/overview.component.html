<section class="space-y-6">
  <div class="grid gap-4 lg:grid-cols-3">
    <app-overview-context-card [filters]="state.filters()" />
    <app-overview-headlines-card
      [headlines]="headlinesState().data"
      [loading]="headlinesState().loading"
      [error]="headlinesState().error"
    />
      <app-overview-ai-card
      [aiEnabled]="state.aiEnabled()"
      (toggle)="state.toggleAiInsights()"
    />
  </div>

  <div class="grid gap-4 lg:grid-cols-2">
    <app-overview-collection-widget
      [statusLabel]="arStatusLabel"
      [statusDisplay]="arSection()?.status ?? 'healthy'"
      [statusClass]="statusClasses[arSection()?.status ?? 'healthy']"
      [statusReason]="arSection()?.statusReason"
      [kpis]="arSection()?.kpis ?? []"
      [error]="arState().error"
    />
    <app-overview-disbursement-widget
      [statusLabel]="apStatusLabel"
      [statusDisplay]="apSection()?.status ?? 'healthy'"
      [statusClass]="statusClasses[apSection()?.status ?? 'healthy']"
      [statusReason]="apSection()?.statusReason"
      [kpis]="apSection()?.kpis ?? []"
      [error]="apState().error"
    />
  </div>

  <div class="grid auto-rows-fr gap-4 lg:grid-cols-2">
    <app-overview-projection-card
      [weeks]="cashWeeks()"
      [summary]="cashSummary()"
      [title]="cashTitle()"
      [asOf]="cashAsOf()"
      [currency]="cashCurrency()"
      [loading]="cashState().loading"
      [error]="cashState().error"
      [expanded]="cashExpanded()"
      (expandToggle)="toggleCashExpanded()"
    />
    <app-overview-projection-graph
      [weeks]="cashWeeks()"
      [summary]="cashSummary()"
      [title]="cashTitle()"
      [asOf]="cashAsOf()"
      [currency]="cashCurrency()"
      [loading]="cashState().loading"
      [error]="cashState().error"
    />
  </div>
 <!-- <div class="grid gap-4 lg:grid-cols-2">
  
    <app-overview-quick-links-card (navigate)="navigateToSection($event)" />
  </div>-->

  <div class="grid gap-4 lg:grid-cols-4">
    <app-overview-section-widget
      [section]="sectionLookup()['liquidity']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['profitability']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['working-capital']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['revenue-health']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['fx-treasury']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['tax-vat']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['balance-sheet']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
    <app-overview-section-widget
      [section]="sectionLookup()['concentration-risk']"
      [statusClasses]="statusClasses"
      (navigate)="navigateToSection($event)"
    />
  </div>
</section>
